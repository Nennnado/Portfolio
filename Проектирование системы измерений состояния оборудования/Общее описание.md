## 1. Короткое описание проекта

Проект посвящён проектированию системы фиксации состояния оборудования в системе технического обслуживания и ремонта.  
Функционал был разработан с нуля: от анализа существующих решений и формирования целевой модели до проектирования логики, API, базы данных и взаимодействия между backend и frontend.

## 2. Зачем это нужно

Фиксация состояния оборудования позволяет сохранять историю изменений, анализировать техническое состояние и использовать эти данные для статистики, планирования и принятия решений в процессах обслуживания и ремонта.

### Примеры использования

- Для оборудования задана точка измерения **«Температура»** с допустимым диапазоном, например от 20 до 80 °C.  
  При фиксации значения 95 °C система автоматически создает неисправность для данного оборудования.
  
- Набор точек измерения формируется индивидуально для каждого типа оборудования и может отличаться в зависимости от его назначения.

### Использование данных в аналитике и статистике

Данные, зафиксированные по точкам измерения, используются для анализа состояния оборудования и принятия решений:

- **Анализ частоты отклонений**  
  Например, можно определить, как часто температура конкретного оборудования выходит за допустимый диапазон и выявить проблемные узлы.

- **Выявление трендов**  
  По историческим данным температуры или давления можно увидеть постепенное ухудшение состояния оборудования ещё до возникновения критической неисправности.

- **Планирование технического обслуживания**  
  На основе показателей моточасов система позволяет переходить от планового обслуживания по датам к обслуживанию по фактическому износу.

- **Оценка надежности оборудования**  
  Сравнение количества неисправностей и отклонений по одинаковым точкам измерения у разных единиц оборудования позволяет выявлять наиболее ненадёжные экземпляры или типы оборудования.
  

## 3. Общее описание проекта

В рамках проекта отсутствовал функционал для фиксации состояния оборудования. Это не позволяло сохранять исторические данные по оборудованию и использовать их для анализа, статистики и принятия решений в процессах технического обслуживания.

Моей задачей было спроектировать систему фиксации состояния оборудования с нуля. На первом этапе я изучила существующие подходы к решению подобных задач на рынке, проанализировала реализации у клиентов и сформировала целевую концепцию системы (TO BE).

Далее была спроектирована логика фиксации состояния оборудования, включая структуру данных и правила их использования в бизнес-процессах. На основе целевой модели я разработала пользовательские сценарии и макеты экранов для интерфейса (макеты не представлены в репозитории по соображениям конфиденциальности).

После этого я спроектировала backend-часть решения: эндпоинты, модель базы данных и логику взаимодействия компонентов системы. Была подготовлена и передана постановка на backend-разработку. 

На финальном этапе я спроектировала взаимодействие backend и frontend, описала контракты и пользовательские сценарии, а также подготовила постановку на frontend-разработку.



# 1. Метод получения списка ТИ

**GET** `api/v1/measpoints`  

**Описание:**  
Данный метод предназначен для получения списка точек измерения.  

---

## Таблица `meas_points_t`

| Название       | Тип данных  | Комментарий           | Обязательность |
|----------------|------------|----------------------|----------------|
| id             | int8       | id записи             |                |
| id_operation   | int8       | id операции           | да             |
| id_measpoint   | int8       | id точки измерения    | да             |
| create_date    | timestamp  | Дата и время создания|                |

---

## Схема запроса

```http
GET api/v1/measpoints

Входные параметры 
| №   | Имя     | Тип | Обязательное | Описание                                         |
| --- | ------- | --- | ------------ | ------------------------------------------------ |
| 1.1 | equipId | int | да           | Id оборудования, на которое ищем точки измерения |
| 1.2 | unitId  | int | нет          | Идентификатор единицы измерения                  |

Выходные параметры
| №    | Имя                | Тип    | Описание                                |
| ---- | ------------------ | ------ | --------------------------------------- |
| 1.1  | id                 | int    | Id точки измерения                      |
| 1.2  | measpoint_name     | string | Наименование точки измерения            |
| 1.3  | char_id            | int    | Id признака                             |
| 1.4  | char_name          | string | Техническое наименование признака       |
| 1.5  | char_text          | string | Текстовое наименование признака         |
| 1.6  | charUnitId         | int    | Id единицы измерения признака           |
| 1.7  | charUnitName       | string | Наименование единицы измерения признака |
| 1.8  | last_measure_date  | date   | Дата последнего измерения               |
| 1.9  | last_measure_value | string | Значение последнего измерения           |
| 1.10 | errorDescription   | string | Описание ошибки                         |


Логика метода

При вызове метода выполняется следующая последовательность действий:

Проверить входные параметры
1.1. Если значение не заполнено → вывести ошибку: «Не заполнен код оборудования»
1.2. Если значение заполнено → переход к п.2

Выбрать значения из таблицы MEAS_POINTS где:

MEAS_POINTS/EQUIPMENTS == equipId

MEAS_POINTS/is_deleted == false

Вернуть значения:

id — MEAS_POINTS/id

measpoint_name — MEAS_POINTS/name

char_id — MEAS_POINTS/characteristic

char_name — CHARACTERISTIC/name

char_text — CHARACTERISTIC/text

charUnitId — CHARACTERISTIC/unit_of_measure

charUnitName — UNITS_T/short_name для CHARACTERISTIC/unit_of_measure

last_measure_date — ближайшая дата из MEAS_DOCS/date по MEAS_POINTS/id (или null)

last_measure_value — соответствующее значение из MEAS_DOCS/value (или null)
