# 1. Метод получения списка ТИ

**GET** `api/v1/measpoints`  

**Описание:**  
Данный метод предназначен для получения списка точек измерения.  

---

## Таблица `meas_points_t`

| Название       | Тип данных  | Комментарий           | Обязательность |
|----------------|------------|----------------------|----------------|
| id             | int8       | id записи             |                |
| id_operation   | int8       | id операции           | да             |
| id_measpoint   | int8       | id точки измерения    | да             |
| create_date    | timestamp  | Дата и время создания|                |

---

## Схема запроса

GET api/v1/measpoints

Входные параметры 
| №   | Имя     | Тип | Обязательное | Описание                                         |
| --- | ------- | --- | ------------ | ------------------------------------------------ |
| 1.1 | equipId | int | да           | Id оборудования, на которое ищем точки измерения |
| 1.2 | unitId  | int | нет          | Идентификатор единицы измерения                  |

Выходные параметры
| №    | Имя                | Тип    | Описание                                |
| ---- | ------------------ | ------ | --------------------------------------- |
| 1.1  | id                 | int    | Id точки измерения                      |
| 1.2  | measpoint_name     | string | Наименование точки измерения            |
| 1.3  | char_id            | int    | Id признака                             |
| 1.4  | char_name          | string | Техническое наименование признака       |
| 1.5  | char_text          | string | Текстовое наименование признака         |
| 1.6  | charUnitId         | int    | Id единицы измерения признака           |
| 1.7  | charUnitName       | string | Наименование единицы измерения признака |
| 1.8  | last_measure_date  | date   | Дата последнего измерения               |
| 1.9  | last_measure_value | string | Значение последнего измерения           |
| 1.10 | errorDescription   | string | Описание ошибки                         |


Логика метода

При вызове метода выполняется следующая последовательность действий:

Проверить входные параметры
1.1. Если значение не заполнено → вывести ошибку: «Не заполнен код оборудования»
1.2. Если значение заполнено → переход к п.2

Выбрать значения из таблицы MEAS_POINTS где:

MEAS_POINTS/EQUIPMENTS == equipId

MEAS_POINTS/is_deleted == false

Вернуть значения:

id — MEAS_POINTS/id

measpoint_name — MEAS_POINTS/name

char_id — MEAS_POINTS/characteristic

char_name — CHARACTERISTIC/name

char_text — CHARACTERISTIC/text

charUnitId — CHARACTERISTIC/unit_of_measure
